<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Captcha Widget Integrace</title>
</head>
<body>
  <!-- Formulář, který obsahuje CAPTCHA -->
  <form action="process.php" method="post">
    <label for="username">Uživatelské jméno:</label>
    <input type="text" id="username" name="username" required>
    
    <label for="password">Heslo:</label>
    <input type="password" id="password" name="password" required>
    
    <!-- Kontejner, do kterého se vykreslí váš widget -->
    <div data-captcha-widget 
         data-api-key="dc07ccd4029d0209a0f4adb1d759a4f3ca9864d824acb4106d175d00aa9fc9a3" 
         data-lang="cs" 
         data-type="image">
    </div>
    
    <!-- Skryté pole, do kterého se uloží CAPTCHA token po úspěšném ověření -->
    <input type="hidden" id="captchaToken" name="captchaToken">
    
    <!-- Tlačítko, které bude povoleno až po ověření CAPTCHA -->
    <button type="submit" id="submitBtn" disabled>Odeslat</button>
  </form>

  <!-- Načtení externích závislostí: React, ReactDOM a váš widget -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/captcha-widget@1.0.6/dist/captcha-widget.umd.js"></script>
  
  <!-- Naslouchání custom eventu, který widget vyvolá po úspěšném ověření -->
  <script>
    window.addEventListener('captchaVerified', function(event) {
      var token = event.detail.token;
      console.log("Captcha ověřena, token:", token);
      // Uložení tokenu do skrytého pole
      document.getElementById('captchaToken').value = token;
      // Povolíme tlačítko odeslání formuláře
      document.getElementById('submitBtn').disabled = false;
    });
  </script>
</body>
</html>
